<div class="content">
  <div class="profile-card">
    <div class="profile-left">
      <img src="assets/avatar.png" alt="Sinh viÃªn" class="profile-photo" />
      <button class="btn edit-btn" (click)="openEditModal()">âœï¸ Chá»‰nh sá»­a</button>
      <button class="btn edit-btn green-btn" (click)="openPasswordModal()">ğŸ”‘ Äá»•i máº­t kháº©u</button>
    </div>

    <div class="profile-right">
      <h2>ThÃ´ng tin cÃ¡ nhÃ¢n</h2>
      <div class="info-grid">
        <div><label>MÃ£ sá»‘ sinh viÃªn:</label><p>{{ student._id }}</p></div>
        <div><label>Há» vÃ  tÃªn:</label><p>{{ student.ho_ten }}</p></div>
        <div><label>Giá»›i tÃ­nh:</label><p>{{ student.gioi_tinh || '-' }}</p></div>
        <div><label>NgÃ y sinh:</label><p>{{ student.ngay_sinh || '-' }}</p></div>
        <div><label>Lá»›p:</label><p>{{ student.lop || '-' }}</p></div>
        <div><label>NgÃ nh há»c:</label><p>{{ student.nganh_hoc || '-' }}</p></div>
        <div><label>Email:</label><p>{{ student.email }}</p></div>
        <div><label>Sá»‘ Ä‘iá»‡n thoáº¡i:</label><p>{{ student.so_dien_thoai || '-' }}</p></div>
      </div>
    </div>
  </div>
</div>

<!-- ğŸ”¹ Modal chá»‰nh sá»­a -->
<div class="modal-backdrop" *ngIf="isModalOpen"></div>
<div class="modal" [class.open]="isModalOpen">
  <div class="modal-content">
    <h3>Chá»‰nh sá»­a thÃ´ng tin cÃ¡ nhÃ¢n</h3>

    <div class="form-row"><label>MÃ£ sá»‘ sinh viÃªn:</label><input type="text" [(ngModel)]="editedStudent._id" readonly /></div>
    <div class="form-row"><label>Há» vÃ  tÃªn:</label><input type="text" [(ngModel)]="editedStudent.ho_ten" readonly /></div>

    <div class="form-row">
      <label>Giá»›i tÃ­nh:</label>
      <select [(ngModel)]="editedStudent.gioi_tinh">
        <option value="">-- Chá»n giá»›i tÃ­nh --</option>
        <option value="Nam">Nam</option>
        <option value="Ná»¯">Ná»¯</option>
        <option value="KhÃ¡c">KhÃ¡c</option>
      </select>
    </div>

    <div class="form-row"><label>NgÃ y sinh:</label><input type="date" [(ngModel)]="editedStudent.ngay_sinh" /></div>
    <div class="form-row"><label>Lá»›p:</label><input type="text" [(ngModel)]="editedStudent.lop" readonly /></div>
    <!-- <div class="form-row">
      <label>NgÃ nh há»c:</label>
      <select [(ngModel)]="editedStudent.nganh_hoc" disabled>
        <option *ngFor="let d of departments" [value]="d.ten_nganh">{{ d.ten_nganh }}</option>
      </select>
    </div> -->
    <div class="form-row"><label>NgÃ nh há»c:</label><input type="text" [(ngModel)]="editedStudent.nganh_hoc" readonly /></div>
  

    <div class="form-row">
      <label>Email:</label>
      <input type="email" [(ngModel)]="editedStudent.email" />
      <small class="error" *ngIf="emailError">{{ emailError }}</small>
    </div>

    <div class="form-row">
      <label>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
      <input type="text" [(ngModel)]="editedStudent.so_dien_thoai" />
      <small class="error" *ngIf="phoneError">{{ phoneError }}</small>
    </div>

    <div class="modal-actions">
      <button class="cancel-btn" (click)="closeEditModal()">Há»§y</button>
      <button class="save-btn" (click)="saveProfile()">LÆ°u</button>
    </div>
  </div>
</div>

<!-- ğŸ”¹ Modal Ä‘á»•i máº­t kháº©u -->
<div class="modal-backdrop" *ngIf="isPasswordModalOpen"></div>
<div class="modal" [class.open]="isPasswordModalOpen">
  <div class="modal-content">
    <h3>Äá»•i máº­t kháº©u</h3>

    <div class="form-row">
      <label>Máº­t kháº©u hiá»‡n táº¡i:</label>
      <div class="password-wrapper">
        <input [type]="showCurrent ? 'text' : 'password'" [(ngModel)]="currentPassword" />
        <span class="toggle-icon" (click)="showCurrent = !showCurrent">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fa" [class.fa-eye]="!showCurrent" [class.fa-eye-slash]="showCurrent"></i>
Â  Â  Â  Â  </span>
      </div>
    </div>

    <div class="form-row">
      <label>Máº­t kháº©u má»›i:</label>
      <div class="password-wrapper">
        <input [type]="showNew ? 'text' : 'password'" [(ngModel)]="newPassword" />
        <span class="toggle-icon" (click)="showNew = !showNew">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fa" [class.fa-eye]="!showNew" [class.fa-eye-slash]="showNew"></i>
Â  Â  Â  Â  </span>
      </div>
      <small class="error" *ngIf="passwordError">{{ passwordError }}</small>
    </div>

    <div class="form-row">
      <label>XÃ¡c nháº­n máº­t kháº©u má»›i:</label>
      <div class="password-wrapper">
        <input [type]="showConfirm ? 'text' : 'password'" [(ngModel)]="confirmPassword" />
        <span class="toggle-icon" (click)="showConfirm = !showConfirm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fa" [class.fa-eye]="!showConfirm" [class.fa-eye-slash]="showConfirm"></i>
Â  Â  Â  Â  </span>
      </div>
      <small class="error" *ngIf="confirmError">{{ confirmError }}</small>
    </div>

    <div class="modal-actions">
      <button class="cancel-btn" (click)="closePasswordModal()">Há»§y</button>
      <button class="save-btn" (click)="changePassword()">LÆ°u</button>
    </div>
  </div>
</div>
